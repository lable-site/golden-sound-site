<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOLDEN SOUND — Музыкальный лейбл</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Montserrat:wght@300;400;500;600;700&family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

    <style>
        /* ============================================================
           ФАЙЛ: variables.css — Токены дизайна
        ============================================================ */
        :root {
            --bg-deep:    #030303;
            --bg-surface: rgba(10, 10, 10, 0.4); /* База для стекла */
            --glass-border: rgba(191, 149, 63, 0.15);
            --glass-glow:   rgba(191, 149, 63, 0.05);

            /* Металлический золотой градиент (дорогой, без желтизны) */
            --gold-gradient: linear-gradient(135deg, #A67C00 0%, #BF953F 25%, #FCF6BA 50%, #B38728 75%, #FDFAAE 100%);
            --gold-gradient-text: linear-gradient(135deg, #c9a84c 0%, #f0d060 35%, #a07828 60%, #e8c84a 100%);
            --gold-solid:   #c9a84c;

            --text-primary:   rgba(255,255,255,0.95);
            --text-secondary: rgba(255,255,255,0.60);
            --text-muted:     rgba(255,255,255,0.30);

            --font-display: 'Syncopate', sans-serif;
            --font-body:    'Montserrat', sans-serif;
            --font-serif:   'Cormorant Garamond', serif;

            --layout-x: clamp(24px, 5vw, 80px);
            --section-gap: clamp(100px, 12vw, 160px);
            --ease-gold: cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        /* ============================================================
           ФАЙЛ: base.css — Сброс и основы
        ============================================================ */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; -webkit-font-smoothing: antialiased; }
        body { font-family: var(--font-body); background: var(--bg-deep); color: var(--text-primary); overflow-x: hidden; cursor: none; }

        /* Кастомный курсор */
        .cursor, .cursor-ring {
            position: fixed; border-radius: 50%; pointer-events: none; z-index: 9999;
            transform: translate(-50%, -50%); mix-blend-mode: screen;
        }
        .cursor { width: 6px; height: 6px; background: var(--gold-solid); transition: width 0.2s, height 0.2s; }
        .cursor-ring { width: 36px; height: 36px; border: 1px solid rgba(191,149,63,0.4); z-index: 9998; transition: width 0.3s, height 0.3s, border-color 0.3s; }
        body:has(a:hover) .cursor, body:has(button:hover) .cursor, body:has(.swiper-slide:hover) .cursor { width: 12px; height: 12px; }
        body:has(a:hover) .cursor-ring, body:has(button:hover) .cursor-ring, body:has(.swiper-slide:hover) .cursor-ring { width: 54px; height: 54px; border-color: rgba(191,149,63,0.8); background: rgba(191,149,63,0.05); backdrop-filter: blur(2px); }

        a { color: inherit; text-decoration: none; }
        img { display: block; max-width: 100%; }

        /* Liquid Glass Utility */
        .glass-panel {
            background: var(--bg-surface);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5), inset 0 0 20px var(--glass-glow);
        }

        /* Reveal анимации */
        .reveal { opacity: 0; transform: translateY(40px); transition: opacity 1s var(--ease-gold), transform 1s var(--ease-gold); }
        .reveal.active { opacity: 1; transform: translateY(0); }
        .reveal-scale { opacity: 0; transform: scale(0.95); transition: opacity 1.2s var(--ease-gold), transform 1.2s var(--ease-gold); }
        .reveal-scale.active { opacity: 1; transform: scale(1); }

        /* ============================================================
           ФАЙЛ: header.css — Шапка
        ============================================================ */
        .header {
            position: fixed; top: 0; left: 0; right: 0; z-index: 100; height: 80px;
            display: flex; align-items: center; padding: 0 var(--layout-x);
            background: linear-gradient(to bottom, rgba(3,3,3,0.8) 0%, transparent 100%);
            border-bottom: 1px solid transparent; transition: all 0.5s var(--ease-gold);
        }
        .header.scrolled { 
            background: rgba(5, 5, 5, 0.6); 
            backdrop-filter: blur(20px); 
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border); 
        }

        .header-brand { display: flex; flex-direction: column; gap: 2px; }
        .header-brand-main { font-family: var(--font-display); font-size: 15px; font-weight: 700; letter-spacing: 0.2em; background: var(--gold-gradient-text); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .header-brand-sub { font-size: 9px; font-weight: 400; letter-spacing: 0.35em; color: var(--text-muted); text-transform: uppercase; }

        .header-nav { margin-left: auto; display: flex; gap: 40px; align-items: center; }
        .header-nav a { font-size: 10px; font-weight: 500; letter-spacing: 0.25em; text-transform: uppercase; color: var(--text-secondary); transition: color 0.3s ease; position: relative; }
        .header-nav a:hover { color: var(--gold-solid); }
        .header-nav a::after { content: ''; position: absolute; bottom: -6px; left: 50%; transform: translateX(-50%); width: 0; height: 1px; background: var(--gold-solid); transition: width 0.3s ease; }
        .header-nav a:hover::after { width: 100%; }

        /* ============================================================
           ФАЙЛ: hero.css — Главный экран (Минимализм & Люкс)
        ============================================================ */
        .hero { position: relative; min-height: 100vh; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        #hero-canvas { position: absolute; inset: 0; z-index: 0; }
        
        .hero-content {
            position: relative; z-index: 2; display: flex; flex-direction: column; align-items: center; text-align: center; width: 100%; max-width: 1000px;
        }

        /* Ебейшее парящее лого в стекле */
        .hero-logo-wrap {
            margin-bottom: 50px; position: relative;
            width: 180px; height: 180px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            animation: float 6s ease-in-out infinite;
        }
        .hero-logo-wrap::before {
            content: ''; position: absolute; inset: -20px; border-radius: 50%;
            background: radial-gradient(circle, rgba(191,149,63,0.15) 0%, transparent 70%);
            z-index: -1; animation: pulseGlow 4s ease-in-out infinite;
        }
        .hero-logo {
            width: 100%; height: 100%; border-radius: 50%; object-fit: cover;
            border: 1px solid rgba(191,149,63,0.4); padding: 8px;
            background: rgba(10, 10, 10, 0.4); backdrop-filter: blur(12px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.8), inset 0 0 30px rgba(191,149,63,0.1);
        }

        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        @keyframes pulseGlow { 0%, 100% { opacity: 0.5; transform: scale(1); } 50% { opacity: 1; transform: scale(1.1); } }

        .hero-title {
            font-family: var(--font-display); font-size: clamp(40px, 8vw, 110px); font-weight: 700;
            line-height: 1.05; letter-spacing: -0.02em; text-transform: uppercase; margin-bottom: 30px;
            display: flex; flex-direction: column; align-items: center;
        }
        .hero-title-line { display: block; }
        .hero-title-line.gold { background: var(--gold-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; padding-bottom: 10px; }

        .hero-tagline {
            font-family: var(--font-serif); font-size: clamp(20px, 2.5vw, 28px); font-weight: 300; font-style: italic;
            color: var(--text-secondary); letter-spacing: 0.05em;
        }

        .scroll-hint { position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%); z-index: 2; display: flex; flex-direction: column; align-items: center; gap: 12px; }
        .scroll-hint span { font-size: 8px; letter-spacing: 0.4em; text-transform: uppercase; color: var(--text-muted); }
        .scroll-line { width: 1px; height: 50px; background: linear-gradient(to bottom, var(--gold-solid), transparent); animation: scrollPulse 2s ease-in-out infinite; }
        @keyframes scrollPulse { 0%, 100% { opacity: 0.2; transform: scaleY(1); transform-origin: top; } 50% { opacity: 1; transform: scaleY(1.4); transform-origin: top; } }

        /* ============================================================
           ФАЙЛ: sections.css — Общие стили секций
        ============================================================ */
        .section { padding: var(--section-gap) 0; position: relative; }
        .section-header { padding: 0 var(--layout-x) 60px; display: flex; flex-direction: column; align-items: center; text-align: center; }
        .section-label { font-size: 9px; font-weight: 500; letter-spacing: 0.4em; text-transform: uppercase; color: var(--gold-solid); margin-bottom: 16px; display: flex; align-items: center; gap: 12px; }
        .section-label::before, .section-label::after { content: ''; width: 30px; height: 1px; background: var(--glass-border); }
        .section-title { font-family: var(--font-display); font-size: clamp(32px, 5vw, 64px); font-weight: 700; letter-spacing: 0.05em; text-transform: uppercase; line-height: 1; }

        /* ============================================================
           ФАЙЛ: artists.css — Секция артистов (SWIPER + LIQUID GLASS)
        ============================================================ */
        #artists { overflow: hidden; background: radial-gradient(circle at center, rgba(191,149,63,0.03) 0%, var(--bg-deep) 70%); }
        
        .swiper { width: 100%; padding-top: 50px; padding-bottom: 50px; }
        
        .swiper-slide {
            width: 320px; /* Размер карточки */
            height: 480px;
            transition: all 0.5s ease;
        }
        
        @media (min-width: 768px) {
            .swiper-slide { width: 400px; height: 550px; }
        }

        .artist-card { 
            width: 100%; height: 100%; position: relative; overflow: hidden; border-radius: 4px;
            /* Liquid Glass эффект для карточки */
            background: var(--bg-surface); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            transition: border-color 0.5s var(--ease-gold), box-shadow 0.5s var(--ease-gold);
        }

        .swiper-slide-active .artist-card {
            border-color: rgba(191,149,63,0.4);
            box-shadow: 0 20px 50px rgba(0,0,0,0.8), 0 0 30px rgba(191,149,63,0.1);
        }

        .artist-img-wrap { width: 100%; height: 100%; position: absolute; inset: 0; z-index: 1; }
        .artist-img { width: 100%; height: 100%; object-fit: cover; object-position: center 20%; transition: transform 1.5s var(--ease-gold); filter: grayscale(20%) contrast(110%); }
        
        .swiper-slide-active .artist-img { transform: scale(1.05); filter: grayscale(0%) contrast(100%); }

        .artist-overlay { 
            position: absolute; inset: 0; z-index: 2;
            background: linear-gradient(to top, rgba(3,3,3,0.95) 0%, rgba(3,3,3,0.4) 30%, transparent 60%); 
        }

        .artist-info { position: absolute; bottom: 0; left: 0; right: 0; padding: 30px; text-align: center; z-index: 3; transform: translateY(20px); opacity: 0.8; transition: all 0.5s var(--ease-gold); }
        .swiper-slide-active .artist-info { transform: translateY(0); opacity: 1; }
        
        .artist-name { font-family: var(--font-display); font-size: 28px; font-weight: 700; letter-spacing: 0.15em; text-transform: uppercase; color: var(--text-primary); text-shadow: 0 4px 10px rgba(0,0,0,0.5); }

        /* Слот "Добавить артиста" */
        .artist-card.add-slot { 
            border: 1px dashed var(--glass-border); display: flex; align-items: center; justify-content: center; background: rgba(10,10,10,0.2); 
        }
        .add-slot-inner { text-align: center; opacity: 0.5; transition: opacity 0.3s; }
        .swiper-slide-active .add-slot-inner { opacity: 1; }
        .add-slot-icon { width: 60px; height: 60px; border: 1px solid var(--gold-solid); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; font-size: 20px; color: var(--gold-solid); box-shadow: inset 0 0 15px rgba(191,149,63,0.2); }
        .add-slot-text { font-size: 11px; letter-spacing: 0.3em; text-transform: uppercase; color: var(--text-primary); }

        /* ============================================================
           ФАЙЛ: services.css — Секция услуг (Liquid Glass)
        ============================================================ */
        #services { position: relative; }
        
        .services-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 24px; padding: 0 var(--layout-x); }
        
        .service-card { 
            padding: 50px 40px; 
            border-radius: 4px;
            transition: transform 0.5s var(--ease-gold), box-shadow 0.5s var(--ease-gold);
            position: relative; overflow: hidden;
        }
        .service-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 1px;
            background: linear-gradient(90deg, transparent, var(--gold-solid), transparent); opacity: 0; transition: opacity 0.5s;
        }
        .service-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.6); border-color: rgba(191,149,63,0.3); }
        .service-card:hover::before { opacity: 0.5; }

        .service-icon-wrap { width: 60px; height: 60px; border: 1px solid var(--glass-border); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 30px; background: rgba(10,10,10,0.5); transition: border-color 0.4s, box-shadow 0.4s; }
        .service-card:hover .service-icon-wrap { border-color: var(--gold-solid); box-shadow: 0 0 20px var(--glass-glow); }
        .service-icon { font-size: 22px; background: var(--gold-gradient-text); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        .service-title { font-family: var(--font-display); font-size: 15px; font-weight: 700; letter-spacing: 0.15em; text-transform: uppercase; margin-bottom: 16px; color: var(--text-primary); }
        .service-desc { font-size: 13px; font-weight: 300; line-height: 1.8; color: var(--text-secondary); }

        /* ============================================================
           ФАЙЛ: contacts.css — Секция контактов
        ============================================================ */
        #contacts { padding-bottom: 120px; }
        .contacts-wrapper { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; padding: 0 var(--layout-x); }
        
        .contact-box { padding: 60px; border-radius: 4px; }
        
        .contacts-title { font-family: var(--font-display); font-size: 24px; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 40px; color: var(--text-primary); }
        
        .contacts-list { list-style: none; display: flex; flex-direction: column; gap: 30px; }
        .contacts-item { display: flex; align-items: flex-start; gap: 24px; }
        .contact-icon { width: 44px; height: 44px; border: 1px solid var(--glass-border); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 14px; color: var(--gold-solid); background: rgba(10,10,10,0.5); }
        .contact-label { font-size: 9px; letter-spacing: 0.3em; text-transform: uppercase; color: var(--text-muted); margin-bottom: 8px; }
        .contact-value { font-size: 15px; font-weight: 400; color: var(--text-primary); transition: color 0.3s; line-height: 1.5; }
        a.contact-value:hover { color: var(--gold-solid); }

        .socials-list { display: flex; flex-direction: column; gap: 20px; }
        .social-link { display: flex; align-items: center; gap: 24px; padding: 20px; border: 1px solid var(--glass-border); border-radius: 4px; background: rgba(10,10,10,0.3); transition: all 0.4s var(--ease-gold); }
        .social-link:hover { background: rgba(191,149,63,0.05); border-color: rgba(191,149,63,0.3); transform: translateX(10px); }
        .social-icon-wrap { font-size: 24px; color: var(--gold-solid); width: 40px; text-align: center; }
        .social-info { flex: 1; }
        .social-name { font-family: var(--font-display); font-size: 14px; font-weight: 700; letter-spacing: 0.15em; text-transform: uppercase; color: var(--text-primary); margin-bottom: 4px; }
        .social-handle { font-size: 12px; color: var(--text-secondary); }
        .social-arrow { font-size: 16px; color: var(--gold-solid); opacity: 0; transform: translateX(-15px); transition: all 0.4s; }
        .social-link:hover .social-arrow { opacity: 1; transform: translateX(0); }

        /* ============================================================
           ФАЙЛ: footer.css — Подвал
        ============================================================ */
        footer { padding: 40px var(--layout-x); border-top: 1px solid var(--glass-border); display: flex; align-items: center; justify-content: space-between; background: rgba(5,5,5,0.8); backdrop-filter: blur(10px); }
        .footer-brand { font-family: var(--font-display); font-size: 13px; font-weight: 700; letter-spacing: 0.25em; background: var(--gold-gradient-text); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .footer-copy { font-size: 10px; letter-spacing: 0.2em; color: var(--text-muted); text-transform: uppercase; }

        /* ============================================================
           ФАЙЛ: responsive.css — Адаптив
        ============================================================ */
        @media (max-width: 1200px) {
            .services-grid { grid-template-columns: 1fr 1fr; }
        }
        @media (max-width: 900px) {
            .contacts-wrapper { grid-template-columns: 1fr; }
        }
        @media (max-width: 768px) {
            .header-nav { display: none; }
            .hero-title { font-size: clamp(36px, 10vw, 60px); }
            .swiper-slide { width: 280px; height: 420px; }
            footer { flex-direction: column; gap: 20px; text-align: center; }
            .body { cursor: auto; }
            .cursor, .cursor-ring { display: none; }
        }
        @media (max-width: 480px) {
            .services-grid { grid-template-columns: 1fr; }
            .contact-box { padding: 30px 20px; }
        }
    </style>
</head>
<body>

    <div class="cursor" id="cursor"></div>
    <div class="cursor-ring" id="cursor-ring"></div>

    <header class="header" id="header">
        <div class="header-brand">
            <span class="header-brand-main">GS</span>
            <span class="header-brand-sub">Golden Sound</span>
        </div>
        <nav class="header-nav">
            <a href="#artists">Артисты</a>
            <a href="#services">Услуги</a>
            <a href="#contacts">Контакты</a>
        </nav>
    </header>

    <section class="hero" id="hero">
        <canvas id="hero-canvas"></canvas>
        <div class="hero-content reveal-scale active">
            <div class="hero-logo-wrap">
                <img src="https://yt3.googleusercontent.com/_AbCMm7NPP-BW3apQ94H3CnaVe0XlkPklw--OclFvVFTHnnFgho-kqOJsVBTNpSnRJ-gnI-guGs=s900-c-k-c0x00ffffff-no-rj" alt="GS Logo" class="hero-logo">
            </div>
            <h1 class="hero-title">
                <span class="hero-title-line">Golden</span>
                <span class="hero-title-line gold">Sound</span>
            </h1>
            <p class="hero-tagline">Мы обречены на успех</p>
        </div>
        <div class="scroll-hint">
            <span>Scroll</span>
            <div class="scroll-line"></div>
        </div>
    </section>

    <section class="section" id="artists">
        <div class="section-header reveal">
            <p class="section-label">Каталог</p>
            <h2 class="section-title">Артисты</h2>
        </div>
        
        <div class="swiper artist-swiper reveal">
            <div class="swiper-wrapper" id="artists-wrapper">
                </div>
        </div>
    </section>

    <section class="section" id="services">
        <div class="section-header reveal">
            <p class="section-label">Что мы делаем</p>
            <h2 class="section-title">Услуги</h2>
        </div>
        <div class="services-grid" id="services-grid">
            </div>
    </section>

    <section class="section" id="contacts">
        <div class="section-header reveal">
            <p class="section-label">Связь</p>
            <h2 class="section-title">Контакты</h2>
        </div>
        <div class="contacts-wrapper">
            <div class="contact-box glass-panel reveal">
                <h3 class="contacts-title">Ждем вас</h3>
                <ul class="contacts-list" id="contacts-list"></ul>
            </div>
            <div class="contact-box glass-panel reveal">
                <h3 class="contacts-title">Мы в сети</h3>
                <div class="socials-list" id="socials-list"></div>
            </div>
        </div>
    </section>

    <footer>
        <span class="footer-brand">GS © 2026</span>
        <span class="footer-copy">Golden Sound. Москва, Россия.</span>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script>
    'use strict';

    // ==== ФАЙЛ: config.js ====
    const CONFIG = {
        USE_SUPABASE: false,
        SUPABASE_URL: 'СЮДА_Я_ВСТАВЛЮ_URL',
        SUPABASE_KEY: 'СЮДА_Я_ВСТАВЛЮ_KEY'
    };

    // ==== ФАЙЛ: mock-db.js ====
    const MOCK_DB = {
        settings: [
            { key: 'address_1', value: 'Москва, 109012, Театральный проезд, 3с3' },
            { key: 'address_2', value: 'Москва, 109052, Смирновская 25, стр.16, 3 этаж, офис 317' },
            { key: 'phone',     value: '+7 999 904-88-86' },
            { key: 'email',     value: 'gsp.sound@mail.ru' },
        ],
        artists: [
            { id: 1, name: 'MACAN',   photo_url: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRaExQ6Cr4qYMIeQ1xUpMutPxSTgB-Cn2ylFpUvvBd1kK5aTOnnb3GY8ml4fju3URApowGG4NuTgPxDEY3cfwZaUiChBI2mIJoCgN1ANZo&s=10' },
            { id: 2, name: 'SCIRENA', photo_url: 'https://i.scdn.co/image/ab6761610000e5ebfc18a28db81258fd88902790' },
            { id: 3, name: 'A.V.G.',  photo_url: 'https://multi-admin.ru/mediabank_blog/11/323289/29c45b8df4f38a786e184b1c3d11bf05.jpg' }
        ],
        services: [
            { id: 1, title: 'Звукозапись', icon: 'fa-solid fa-microphone-lines', description: 'Профессиональная запись, сведение и мастеринг в акустически совершенных студиях Москвы.' },
            { id: 2, title: 'Дистрибьюция', icon: 'fa-solid fa-earth-americas', description: 'Выпуск музыки на всех мировых платформах с максимальным охватом аудитории.' },
            { id: 3, title: 'Продюсирование', icon: 'fa-solid fa-sliders', description: 'Полный цикл создания трека — от идеи до финального мастера с нашими топ-продюсерами.' },
            { id: 4, title: 'Продвижение', icon: 'fa-solid fa-arrow-trend-up', description: 'Агрессивные маркетинговые кампании, работа с медиа и стремительный рост аудитории.' }
        ],
        socials: [
            { id: 1, name: 'YouTube',   handle: 'Golden Sound',          icon: 'fa-brands fa-youtube',   url: 'https://www.youtube.com/channel/UCy8MBNS-yBok_3nbCHJ0H3w' },
            { id: 2, name: 'VKontakte', handle: 'goldensound_official',  icon: 'fa-brands fa-vk',        url: 'https://vk.com/goldensound_official' },
            { id: 3, name: 'Instagram', handle: 'goldensound.18',        icon: 'fa-brands fa-instagram', url: 'https://www.instagram.com/goldensound.18' }
        ]
    };

    // ==== ФАЙЛ: supabase.js ====
    async function fetchData(tableName) {
        if (!CONFIG.USE_SUPABASE) return Promise.resolve(MOCK_DB[tableName] || []);
        const res = await fetch(`${CONFIG.SUPABASE_URL}/rest/v1/${tableName}?select=*`, {
            headers: { 'apikey': CONFIG.SUPABASE_KEY, 'Authorization': `Bearer ${CONFIG.SUPABASE_KEY}` }
        });
        if (!res.ok) throw new Error(`Supabase ошибка ${res.status}`);
        return res.json();
    }

    // ==== Canvas: Золотая пыль (Только Hero) ====
    const heroCanvas = document.getElementById('hero-canvas'), heroCtx = heroCanvas.getContext('2d', { alpha: false });
    let HW, HH, heroDust = [], rafId = null;

    class Dust {
        constructor() { this.reset(true); }
        reset(initial) {
            this.x = Math.random() * HW; this.y = initial ? Math.random() * HH : HH + 10;
            this.size = Math.random() * 1.5 + 0.3; this.alpha = Math.random() * 0.4 + 0.1;
            this.speedY = -(Math.random() * 0.3 + 0.1); this.speedX = (Math.random() - 0.5) * 0.2;
            const r = 180 + Math.floor(Math.random() * 60), g = 140 + Math.floor(Math.random() * 50), b = 30 + Math.floor(Math.random() * 40);
            this.color = `rgba(${r},${g},${b},`;
        }
        update() {
            this.x += this.speedX; this.y += this.speedY;
            if (this.y < -10 || this.x < -10 || this.x > HW + 10) this.reset(false);
        }
        draw(ctx) {
            ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fillStyle = this.color + this.alpha + ')'; ctx.fill();
        }
    }

    function initCanvas() {
        HW = document.getElementById('hero').offsetWidth; HH = document.getElementById('hero').offsetHeight;
        heroCanvas.width = HW; heroCanvas.height = HH;
        heroDust = Array.from({length: Math.min(150, Math.floor(HW * HH / 8000))}, () => new Dust());
    }

    function animateCanvas() {
        heroCtx.fillStyle = '#030303'; heroCtx.fillRect(0, 0, HW, HH);
        const grad = heroCtx.createRadialGradient(HW*0.5, HH*0.5, 0, HW*0.5, HH*0.5, Math.max(HW, HH)*0.7);
        grad.addColorStop(0, 'rgba(191,149,63,0.08)'); grad.addColorStop(1, 'rgba(3,3,3,0)');
        heroCtx.fillStyle = grad; heroCtx.fillRect(0, 0, HW, HH);
        heroDust.forEach(d => { d.update(); d.draw(heroCtx); });
        rafId = requestAnimationFrame(animateCanvas);
    }

    // ==== Cursor & Header ====
    const cursor = document.getElementById('cursor'), cursorRing = document.getElementById('cursor-ring');
    let cx = -100, cy = -100, rx = -100, ry = -100;
    document.addEventListener('mousemove', e => { cx = e.clientX; cy = e.clientY; });
    (function cursorLoop() {
        cursor.style.left = cx + 'px'; cursor.style.top = cy + 'px';
        rx += (cx - rx) * 0.15; ry += (cy - ry) * 0.15;
        cursorRing.style.left = rx + 'px'; cursorRing.style.top = ry + 'px';
        requestAnimationFrame(cursorLoop);
    })();
    window.addEventListener('scroll', () => document.getElementById('header').classList.toggle('scrolled', window.scrollY > 50), { passive: true });

    // ==== Renders ====
    async function renderArtists() {
        const wrapper = document.getElementById('artists-wrapper');
        try {
            const artists = await fetchData('artists');
            artists.forEach(artist => {
                const slide = document.createElement('div'); slide.className = 'swiper-slide';
                slide.innerHTML = `
                    <div class="artist-card">
                        <div class="artist-img-wrap"><img src="${artist.photo_url}" class="artist-img" alt="${artist.name}" loading="lazy"></div>
                        <div class="artist-overlay"></div>
                        <div class="artist-info"><h3 class="artist-name">${artist.name}</h3></div>
                    </div>`;
                wrapper.appendChild(slide);
            });
            
            // Слот "Добавить"
            const addSlide = document.createElement('div'); addSlide.className = 'swiper-slide';
            addSlide.innerHTML = `
                <div class="artist-card add-slot">
                    <div class="add-slot-inner">
                        <div class="add-slot-icon"><i class="fa-solid fa-plus"></i></div>
                        <p class="add-slot-text">Каталог открыт</p>
                    </div>
                </div>`;
            wrapper.appendChild(addSlide);

            // Инициализация Swiper ПОСЛЕ добавления слайдов
            new Swiper('.artist-swiper', {
                effect: 'coverflow',
                grabCursor: true,
                centeredSlides: true,
                slidesPerView: 'auto',
                initialSlide: 1,
                coverflowEffect: { rotate: 20, stretch: 0, depth: 250, modifier: 1, slideShadows: false },
                keyboard: { enabled: true },
                speed: 800
            });

        } catch (e) { console.error(e); }
    }

    async function renderServices() {
        const grid = document.getElementById('services-grid');
        try {
            const services = await fetchData('services');
            services.forEach(s => {
                const card = document.createElement('div'); card.className = 'service-card glass-panel reveal';
                card.innerHTML = `<div class="service-icon-wrap"><i class="${s.icon} service-icon"></i></div><h3 class="service-title">${s.title}</h3><p class="service-desc">${s.description}</p>`;
                grid.appendChild(card);
            });
        } catch (e) {}
    }

    async function renderContactsAndSocials() {
        try {
            const [settings, socials] = await Promise.all([fetchData('settings'), fetchData('socials')]);
            const s = {}; settings.forEach(r => s[r.key] = r.value);
            
            const cList = document.getElementById('contacts-list');
            [{i: 'fa-location-dot', l: 'Адрес', v: s.address_1}, {i: 'fa-location-dot', l: 'Офис', v: s.address_2}, {i: 'fa-phone', l: 'Телефон', v: s.phone, h: `tel:${(s.phone||'').replace(/\s/g,'')}`}, {i: 'fa-envelope', l: 'Email', v: s.email, h: `mailto:${s.email}`}].forEach(item => {
                if(!item.v) return;
                const li = document.createElement('li'); li.className = 'contacts-item';
                li.innerHTML = `<div class="contact-icon"><i class="fa-solid ${item.i}"></i></div><div><p class="contact-label">${item.l}</p>${item.h ? `<a href="${item.h}" class="contact-value">${item.v}</a>` : `<p class="contact-value">${item.v}</p>`}</div>`;
                cList.appendChild(li);
            });

            const sList = document.getElementById('socials-list');
            socials.forEach(soc => {
                const a = document.createElement('a'); a.className = 'social-link'; a.href = soc.url; a.target = '_blank';
                a.innerHTML = `<div class="social-icon-wrap"><i class="${soc.icon}"></i></div><div class="social-info"><p class="social-name">${soc.name}</p><p class="social-handle">@${soc.handle}</p></div><i class="fa-solid fa-arrow-right social-arrow"></i>`;
                sList.appendChild(a);
            });
        } catch (e) {}
    }

    // ==== Init ====
    async function init() {
        initCanvas(); animateCanvas();
        await Promise.allSettled([renderArtists(), renderServices(), renderContactsAndSocials()]);
        
        const obs = new IntersectionObserver(e => e.forEach((en, i) => { 
            if(en.isIntersecting) { 
                setTimeout(() => en.target.classList.add('active'), i*100); 
                obs.unobserve(en.target); 
            } 
        }), { threshold: 0.1 });
        document.querySelectorAll('.reveal, .reveal-scale').forEach(el => obs.observe(el));
    }

    window.addEventListener('resize', () => { clearTimeout(window.rt); window.rt = setTimeout(initCanvas, 250); });
    document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
